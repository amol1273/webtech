SERVER CODE:
import socket

def start_file_server(host='127.0.0.1', port=65432, buffer_size=4096):
    # Create a TCP socket
    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_socket.bind((host, port))
    server_socket.listen(1)
    print(f"Server listening on {host}:{port}...")

    # Accept a client connection
    conn, addr = server_socket.accept()
    print(f"Connected by {addr}")

    # Receive the file name first
    file_name = conn.recv(buffer_size).decode()
    print(f"Receiving file: {file_name}")

    # Open the file in binary write mode
    with open(file_name, 'wb') as f:
        while True:
            data = conn.recv(buffer_size)
            if not data:
                break  # Break when no more data is sent
            f.write(data)  # Write data to the file

    print(f"File '{file_name}' received successfully.")
    conn.close()
    server_socket.close()

if __name__ == "__main__":
    start_file_server()

CLIENT CODE:
import socket
import os

def send_file(file_path, host='127.0.0.1', port=65432, buffer_size=4096):
    # Create a TCP socket
    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    try:
        # Connect to the server
        client_socket.connect((host, port))
        print(f"Connected to server at {host}:{port}")

        # Send the file name
        file_name = os.path.basename(file_path)
        client_socket.send(file_name.encode())

        # Open the file in binary read mode and send its contents
        with open(file_path, 'rb') as f:
            while True:
                data = f.read(buffer_size)
                if not data:
                    break  # End of file
                client_socket.sendall(data)  # Send data to the server

        print(f"File '{file_name}' sent successfully.")

    except Exception as e:
        print(f"Error: {e}")

    finally:
        client_socket.close()

if __name__ == "__main__":
    # Provide the file path to send
    file_path = input("Enter the path of the file to send: ")
    send_file(file_path)
